{"ast":null,"code":"var _jsxFileName = \"C:\\\\Bootcamp\\\\teamproject\\\\project\\\\LocalRentalKing\\\\front\\\\pages\\\\write.js\";\nvar __jsx = React.createElement;\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport AppLayout from '../components/AppLayout/AppLayout';\nimport { Button, Form, Input, Select } from \"antd\";\nimport 'antd/dist/antd.css';\nimport { REMOVE_IMAGE, SEND_DUMMYPOST_REQUEST, UPLOAD_IMAGES_REQUEST } from \"../reducers/post\";\nimport Router from \"next/router\";\nimport useInput from \"../hooks/useInput\";\nimport Layout from \"../components/Layout\";\nconst {\n  TextArea\n} = Input;\nconst {\n  Option\n} = Select;\n\nfunction Write() {\n  const dispatch = useDispatch();\n  const {\n    me\n  } = useSelector(state => state.user);\n  const {\n    object_TagsData,\n    talent_TagsData,\n    cooperate_tagsData,\n    play_tagsData,\n    imagePaths,\n    addPostDone\n  } = useSelector(state => state.post);\n  const [title, onTitle, setTitle] = useInput('');\n  const [content, onContent, setContent] = useInput('');\n  const [price, onPrice, setPrice] = useInput(0);\n  const [originalPrice, onOriginalPrice, setOriginalPrice] = useInput(0);\n  const [sharedPrice, onSharedPrice, setSharedPrice] = useInput(0);\n  const provinceData = ['물건빌려줘', '물건빌려줄게', '힘을빌려줘', '힘을빌려줄게', '같이하자', '동네놀이터'];\n  const tags1 = object_TagsData.filter((e, i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\n\n  const tags2 = object_TagsData.filter((e, i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\n\n  const tags3 = talent_TagsData.filter((e, i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\n\n  const tags4 = talent_TagsData.filter((e, i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\n\n  const tags5 = cooperate_tagsData.filter((e, i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\n\n  const tags6 = play_tagsData.filter((e, i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\n\n  const imageInput = useRef();\n  useEffect(() => {\n    if (!(me && me.id)) {\n      Router.push('/');\n    }\n  }, [me && me.id]);\n  useEffect(() => {\n    if (addPostDone) {\n      Router.push('/');\n    }\n  }, [addPostDone]);\n  useEffect(() => {\n    setPrice(null);\n    setOriginalPrice(null);\n    setSharedPrice(null);\n  }, []);\n\n  if (!me) {\n    return '내 정보 로딩중...';\n  }\n\n  const [form] = Form.useForm();\n  const {\n    0: board,\n    1: setBoard\n  } = useState(provinceData[0]);\n  const onBoard = useCallback(value => {\n    setBoard(value);\n  }, []);\n  const {\n    0: category,\n    1: setCategory\n  } = useState(tags1[0]);\n  const onCategory = useCallback(value => {\n    setCategory(value);\n  }, []);\n  const onClickImageUpload = useCallback(() => {\n    imageInput.current.click();\n  }, [imageInput.current]);\n  const onChangeImages = useCallback(e => {\n    console.log('images', e.target.files);\n    const imageFormData = new FormData();\n    [].forEach.call(e.target.files, f => {\n      imageFormData.append('image', f);\n    });\n    dispatch({\n      type: UPLOAD_IMAGES_REQUEST,\n      data: imageFormData\n    });\n  });\n  const onRemoveImage = useCallback(index => () => {\n    dispatch({\n      type: REMOVE_IMAGE,\n      data: index\n    });\n  });\n  const onSubmit = useCallback(() => {\n    if (!content || !content.trim()) {\n      return alert('게시글을 작성하세요.');\n    }\n\n    if (!price) setPrice(0);\n    if (!originalPrice) setOriginalPrice(0);\n    if (!sharedPrice) setSharedPrice(0);\n    const formData = new FormData();\n    imagePaths.forEach(i => {\n      formData.append('image', i);\n    });\n    formData.append('content', content);\n    formData.append('userid', me.id);\n    formData.append('location', me.location);\n    formData.append('nickname', me.nickname);\n    formData.append('category', category);\n    formData.append('title', title);\n    formData.append('originalPrice', originalPrice);\n    formData.append('sharedPrice', sharedPrice);\n    formData.append('price', price);\n    if (board == provinceData[0]) formData.append('boardNum', 1);else if (board == provinceData[1]) formData.append('boardNum', 2);else if (board == provinceData[2]) formData.append('boardNum', 3);else if (board == provinceData[3]) formData.append('boardNum', 4);else if (board == provinceData[4]) formData.append('boardNum', 5);else if (board == provinceData[5]) formData.append('boardNum', 6);\n    return dispatch({\n      type: SEND_DUMMYPOST_REQUEST,\n      data: formData\n    });\n  }, [content, imagePaths]);\n  const onCancel = useCallback(() => {\n    Router.push('/');\n  }, []);\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 12\n    }\n  })), __jsx(Form, {\n    layout: \"horizontal\",\n    form: form,\n    initialValues: {\n      layout: 'horizontal'\n    },\n    onFinish: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, __jsx(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, __jsx(Input.Group, {\n    compact: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, __jsx(Input, {\n    style: {\n      width: '69%'\n    },\n    placeholder: \"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: title,\n    onChange: onTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }), ' ', board === provinceData[0] && __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uB80C\\uD0C8\\uBE44\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: price,\n    onChange: onPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }), board === provinceData[1] && __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uB80C\\uD0C8\\uBE44\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: price,\n    onChange: onPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }), board === provinceData[2] && __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uB80C\\uD0C8\\uBE44\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: price,\n    onChange: onPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }), board === provinceData[3] && __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uB80C\\uD0C8\\uBE44\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: price,\n    onChange: onPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }), board === provinceData[4] && category == tags5[0] && __jsx(Input.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uBB3C\\uD488\\uAE08\\uC561\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: originalPrice,\n    onChange: onOriginalPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 15\n    }\n  }), __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uAC1C\\uC778\\uBD80\\uB2F4\\uC561\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: sharedPrice,\n    onChange: onSharedPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  })), board === provinceData[4] && category == tags5[1] && __jsx(Input.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }, __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uBC30\\uB2EC\\uBE44\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: originalPrice,\n    onChange: onOriginalPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 15\n    }\n  }), __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uAC1C\\uC778\\uBD80\\uB2F4\\uC561\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: sharedPrice,\n    onChange: onSharedPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 15\n    }\n  })), board === provinceData[4] && category == tags5[2] && __jsx(Input.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }, __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uC815\\uC0C1\\uAC00\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: originalPrice,\n    onChange: onOriginalPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 15\n    }\n  }), __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uACF5\\uAD6C\\uAC00\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: sharedPrice,\n    onChange: onSharedPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 15\n    }\n  })), board === provinceData[4] && category == tags5[3] && __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uB80C\\uD0C8\\uBE44\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: originalPrice,\n    onChange: onOriginalPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }))), __jsx(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 9\n    }\n  }, __jsx(Select, {\n    defaultValue: provinceData,\n    style: {\n      width: 120\n    },\n    onChange: onBoard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 11\n    }\n  }, provinceData.map(province => __jsx(Option, {\n    key: province,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 15\n    }\n  }, province))), board === provinceData[0] && __jsx(Select, {\n    style: {\n      width: 120\n    },\n    defaultValue: tags1[0],\n    onChange: onCategory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 11\n    }\n  }, tags1.map(tag => __jsx(Option, {\n    value: tag,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 15\n    }\n  }, tag))), board === provinceData[1] && __jsx(Select, {\n    style: {\n      width: 120\n    },\n    defaultValue: tags2[0],\n    onChange: onCategory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 11\n    }\n  }, tags2.map(city => __jsx(Option, {\n    value: city,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 15\n    }\n  }, city))), board === provinceData[2] && __jsx(Select, {\n    style: {\n      width: 120\n    },\n    defaultValue: tags3[0],\n    onChange: onCategory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 11\n    }\n  }, tags3.map(city => __jsx(Option, {\n    value: city,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 15\n    }\n  }, city))), board === provinceData[3] && __jsx(Select, {\n    style: {\n      width: 120\n    },\n    defaultValue: tags4[0],\n    onChange: onCategory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 11\n    }\n  }, tags4.map(city => __jsx(Option, {\n    value: city,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 15\n    }\n  }, city))), board === provinceData[4] && __jsx(Select, {\n    style: {\n      width: 120\n    },\n    defaultValue: null,\n    onChange: onCategory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 11\n    }\n  }, tags5.map(city => __jsx(Option, {\n    value: city,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 15\n    }\n  }, city))), board === provinceData[5] && __jsx(Select, {\n    style: {\n      width: 120\n    },\n    defaultValue: tags6[0],\n    onChange: onCategory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 11\n    }\n  }, tags6.map(city => __jsx(Option, {\n    value: city,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 15\n    }\n  }, city)))), __jsx(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 11\n    }\n  }, __jsx(\"input\", {\n    type: \"file\",\n    name: \"image\",\n    multiple: true,\n    hidden: true,\n    ref: imageInput,\n    onChange: onChangeImages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 13\n    }\n  }), __jsx(Button, {\n    onClick: onClickImageUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 13\n    }\n  }, \"\\uC774\\uBBF8\\uC9C0 \\uC5C5\\uB85C\\uB4DC\")), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 11\n    }\n  }, imagePaths.map((v, i) => __jsx(\"div\", {\n    key: v,\n    style: {\n      display: 'inline-block'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 15\n    }\n  }, __jsx(\"img\", {\n    src: `http://localhost:3065/${v}`,\n    style: {\n      width: '200px'\n    },\n    alt: v,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 17\n    }\n  }), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    onClick: onRemoveImage(i),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 19\n    }\n  }, \"\\uC81C\\uAC70\")))))), __jsx(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 9\n    }\n  }, __jsx(TextArea, {\n    placeholder: \"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n    autoSize: {\n      minRows: 7,\n      maxRows: 7\n    },\n    value: content,\n    onChange: onContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 11\n    }\n  })), __jsx(Form.Item, {\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 11\n    }\n  }, \"\\uB4F1\\uB85D\"), ' ', __jsx(Button, {\n    type: \"primary\",\n    onClick: onCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 11\n    }\n  }, \"\\uCDE8\\uC18C\"))));\n}\n\n;\nexport default Write;","map":{"version":3,"sources":["C:/Bootcamp/teamproject/project/LocalRentalKing/front/pages/write.js"],"names":["React","useCallback","useEffect","useRef","useState","useDispatch","useSelector","AppLayout","Button","Form","Input","Select","REMOVE_IMAGE","SEND_DUMMYPOST_REQUEST","UPLOAD_IMAGES_REQUEST","Router","useInput","Layout","TextArea","Option","Write","dispatch","me","state","user","object_TagsData","talent_TagsData","cooperate_tagsData","play_tagsData","imagePaths","addPostDone","post","title","onTitle","setTitle","content","onContent","setContent","price","onPrice","setPrice","originalPrice","onOriginalPrice","setOriginalPrice","sharedPrice","onSharedPrice","setSharedPrice","provinceData","tags1","filter","e","i","tags2","tags3","tags4","tags5","tags6","imageInput","id","push","form","useForm","board","setBoard","onBoard","value","category","setCategory","onCategory","onClickImageUpload","current","click","onChangeImages","console","log","target","files","imageFormData","FormData","forEach","call","f","append","type","data","onRemoveImage","index","onSubmit","trim","alert","formData","location","nickname","onCancel","layout","width","map","province","tag","city","v","display","minRows","maxRows","textAlign"],"mappings":"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","sourcesContent":["import React, {useCallback, useEffect, useRef, useState} from 'react';\nimport {useDispatch, useSelector} from 'react-redux';\nimport AppLayout from '../components/AppLayout/AppLayout';\nimport {Button, Form, Input, Select} from \"antd\";\nimport 'antd/dist/antd.css';\nimport {REMOVE_IMAGE, SEND_DUMMYPOST_REQUEST, UPLOAD_IMAGES_REQUEST} from \"../reducers/post\";\nimport Router from \"next/router\";\nimport useInput from \"../hooks/useInput\";\nimport Layout from \"../components/Layout\";\n\nconst {TextArea} = Input;\nconst {Option} = Select;\n\nfunction Write() {\n  const dispatch = useDispatch();\n  const {me} = useSelector((state) => state.user);\n  const {object_TagsData , talent_TagsData , cooperate_tagsData , play_tagsData , imagePaths, addPostDone} = useSelector((state) => state.post);\n  const [title, onTitle, setTitle] = useInput('');\n  const [content, onContent, setContent] = useInput('');\n  const [price, onPrice, setPrice] = useInput(0);\n  const [originalPrice, onOriginalPrice, setOriginalPrice] = useInput(0);\n  const [sharedPrice, onSharedPrice, setSharedPrice] = useInput(0);\n\n  const provinceData = ['물건빌려줘', '물건빌려줄게', '힘을빌려줘', '힘을빌려줄게', '같이하자', '동네놀이터',];\n  const tags1 = object_TagsData.filter((e,i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\n  const tags2 = object_TagsData.filter((e,i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\n  const tags3 = talent_TagsData.filter((e,i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\n  const tags4 = talent_TagsData.filter((e,i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\n  const tags5 = cooperate_tagsData.filter((e,i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\n  const tags6 = play_tagsData.filter((e,i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\n  const imageInput = useRef();\n\n  useEffect(() => {\n    if (!(me && me.id)) {\n      Router.push('/');\n    }\n  }, [me && me.id]);\n\n  useEffect(() => {\n    if (addPostDone) {\n      Router.push('/');\n    }\n  }, [addPostDone]);\n\n  useEffect(() => {\n    setPrice(null);\n    setOriginalPrice(null);\n    setSharedPrice(null);\n  }, []);\n\n  if (!me) {\n    return '내 정보 로딩중...';\n  }\n\n\n    const [form] = Form.useForm();\n\n    const [board, setBoard] = useState(provinceData[0]);\n    const onBoard = useCallback((value) => {\n      setBoard(value);\n    }, []);\n\n    const [category, setCategory] = useState(tags1[0]);\n    const onCategory = useCallback((value) => {\n      setCategory(value);\n    }, []);\n\n  const onClickImageUpload = useCallback(() => {\n    imageInput.current.click();\n  }, [imageInput.current]);\n\n  const onChangeImages = useCallback((e) => {\n    console.log('images', e.target.files);\n    const imageFormData = new FormData();\n    [].forEach.call(e.target.files, (f) => {\n      imageFormData.append('image', f);\n    });\n    dispatch({\n      type: UPLOAD_IMAGES_REQUEST,\n      data: imageFormData,\n    });\n  });\n\n  const onRemoveImage = useCallback((index) => () => {\n    dispatch({\n      type: REMOVE_IMAGE,\n      data: index,\n    });\n  });\n\n  const onSubmit = useCallback(() => {\n    if (!content || !content.trim()) {\n      return alert('게시글을 작성하세요.');\n    }\n\n    if(!price)setPrice(0);\n    if(!originalPrice)setOriginalPrice(0);\n    if(!sharedPrice)setSharedPrice(0);\n\n    const formData = new FormData();\n    imagePaths.forEach((i) => {\n      formData.append('image', i);\n    });\n    formData.append('content', content);\n    formData.append('userid', me.id);\n    formData.append('location', me.location);\n    formData.append('nickname', me.nickname);\n    formData.append('category', category);\n    formData.append('title', title);\n    formData.append('originalPrice', originalPrice);\n    formData.append('sharedPrice', sharedPrice);\n    formData.append('price', price);\n\n    if(board == provinceData[0])formData.append('boardNum', 1);\n    else if(board == provinceData[1])formData.append('boardNum', 2);\n    else if(board == provinceData[2])formData.append('boardNum', 3);\n    else if(board == provinceData[3])formData.append('boardNum', 4);\n    else if(board == provinceData[4])formData.append('boardNum', 5);\n    else if(board == provinceData[5])formData.append('boardNum', 6);\n\n    return dispatch({\n      type: SEND_DUMMYPOST_REQUEST,\n      data: formData,\n    });\n  }, [content, imagePaths]);\n\n  const onCancel = useCallback(() => {\n    Router.push('/');\n  }, []);\n\n  return (\n    <Layout>\n      <div><br/></div>\n      <Form\n        layout=\"horizontal\"\n        form={form}\n        initialValues={{\n          layout: 'horizontal',\n        }}\n        onFinish={onSubmit}\n      >\n\n        <Form.Item>\n          <Input.Group compact >\n            <Input style={{width: '69%'}} placeholder=\"제목을 입력해주세요.\" value={title} onChange={onTitle}/>{' '}\n            {board === provinceData[0] &&\n            <Input style={{width: '30%'}} placeholder=\"렌탈비를 입력해주세요.\" value={price} onChange={onPrice}/>}\n            {board === provinceData[1] &&\n            <Input style={{width: '30%'}} placeholder=\"렌탈비를 입력해주세요.\" value={price} onChange={onPrice}/>}\n            {board === provinceData[2] &&\n            <Input style={{width: '30%'}} placeholder=\"렌탈비를 입력해주세요.\" value={price} onChange={onPrice}/>}\n            {board === provinceData[3] &&\n            <Input style={{width: '30%'}} placeholder=\"렌탈비를 입력해주세요.\" value={price} onChange={onPrice}/>}\n\n            {board === provinceData[4] && category == tags5[0] &&\n            <Input.Group>\n              <Input\n                style={{width: '30%'}}\n                placeholder=\"물품금액을 입력해주세요.\"\n                value={originalPrice} onChange={onOriginalPrice}\n              />\n              <Input\n              style={{width: '30%'}}\n              placeholder=\"개인부담액을 입력해주세요.\"\n              value={sharedPrice} onChange={onSharedPrice}\n              />\n            </Input.Group>\n            }\n\n            {board === provinceData[4] && category == tags5[1] &&\n            <Input.Group>\n              <Input\n                style={{width: '30%'}}\n                placeholder=\"배달비를 입력해주세요.\"\n                value={originalPrice} onChange={onOriginalPrice}\n              />\n              <Input\n                style={{width: '30%'}}\n                placeholder=\"개인부담액을 입력해주세요.\"\n                value={sharedPrice} onChange={onSharedPrice}\n              />\n            </Input.Group>\n            }\n\n            {board === provinceData[4] && category == tags5[2] &&\n            <Input.Group>\n              <Input\n                style={{width: '30%'}}\n                placeholder=\"정상가를 입력해주세요.\"\n                value={originalPrice} onChange={onOriginalPrice}\n              />\n              <Input\n                style={{width: '30%'}}\n                placeholder=\"공구가를 입력해주세요.\"\n                value={sharedPrice} onChange={onSharedPrice}\n              />\n            </Input.Group>\n            }\n\n\n            {board === provinceData[4] && category == tags5[3] &&\n            <Input\n              style={{width: '30%'}}\n              placeholder=\"렌탈비를 입력해주세요.\"\n              value={originalPrice} onChange={onOriginalPrice}\n            />\n            }\n\n          </Input.Group>\n        </Form.Item>\n\n        <Form.Item>\n          <Select\n            defaultValue={provinceData}\n            style={{width: 120}}\n            onChange={onBoard}\n          >\n            {provinceData.map((province) => (\n              <Option key={province}>{province}</Option>\n            ))}\n          </Select>\n          {board === provinceData[0] &&\n          <Select\n            style={{width: 120}}\n            defaultValue={tags1[0]}\n            onChange={onCategory}\n          >\n            {tags1.map((tag) => (\n              <Option value={tag}>{tag}</Option>\n            ))}\n          </Select>\n          }\n          {board === provinceData[1] &&\n          <Select\n            style={{width: 120}}\n            defaultValue={tags2[0]}\n            onChange={onCategory}\n          >\n            {tags2.map((city) => (\n              <Option value={city}>{city}</Option>\n            ))}\n          </Select>\n          }\n          {board === provinceData[2] &&\n          <Select\n            style={{width: 120}}\n            defaultValue={tags3[0]}\n            onChange={onCategory}\n          >\n\n            {tags3.map((city) => (\n              <Option value={city}>{city}</Option>\n            ))}\n          </Select>\n          }\n          {board === provinceData[3] &&\n          <Select\n            style={{width: 120}}\n            defaultValue={tags4[0]}\n            onChange={onCategory}\n          >\n\n            {tags4.map((city) => (\n              <Option value={city}>{city}</Option>\n            ))}\n          </Select>\n          }\n          {board === provinceData[4] &&\n          <Select\n            style={{width: 120}}\n            defaultValue={null}\n            onChange={onCategory}\n          >\n\n            {tags5.map((city) => (\n              <Option value={city}>{city}</Option>\n            ))}\n          </Select>\n          }\n          {board === provinceData[5] &&\n          <Select\n            style={{width: 120}}\n            defaultValue={tags6[0]}\n            onChange={onCategory}\n          >\n            {tags6.map((city) => (\n              <Option value={city}>{city}</Option>\n            ))}\n          </Select>\n          }\n        </Form.Item>\n        <Form.Item>\n          <div>\n            <input type=\"file\" name=\"image\" multiple hidden ref={imageInput} onChange={onChangeImages} />\n            <Button onClick={onClickImageUpload}>이미지 업로드</Button>\n          </div>\n          <div>\n            {imagePaths.map((v, i) => (\n              <div key={v} style={{ display: 'inline-block' }}>\n                <img src={`http://localhost:3065/${v}`} style={{ width: '200px' }} alt={v} />\n                {/* 프론트와 백의 도메인이 다르기 때문에 도메인 교정을 해주어야 백의 이미지를 성공적으로 들고와 렌더링 할 수 있다. */}\n                <div>\n                  <Button onClick={onRemoveImage(i)}>제거</Button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </Form.Item>\n        <Form.Item>\n          <TextArea\n            placeholder=\"내용을 입력해주세요\"\n            autoSize={{minRows: 7, maxRows: 7}}\n            value={content}\n            onChange={onContent}\n          />\n        </Form.Item>\n\n        <Form.Item style={{textAlign: 'center'}}>\n          <Button type=\"primary\" htmlType=\"submit\">\n            등록\n          </Button>{' '}\n          <Button type=\"primary\" onClick={onCancel}>취소</Button>\n        </Form.Item>\n      </Form>\n    </Layout>\n  );\n};\n\nexport default Write;\n"]},"metadata":{},"sourceType":"module"}