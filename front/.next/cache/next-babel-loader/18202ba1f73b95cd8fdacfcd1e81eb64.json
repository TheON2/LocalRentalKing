{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Bootcamp\\\\teamproject\\\\project\\\\LocalRentalKing\\\\front\\\\pages\\\\write.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport AppLayout from '../components/AppLayout/AppLayout';\nimport { Button, Form, Input, Select } from \"antd\";\nimport 'antd/dist/antd.css';\nimport { REMOVE_IMAGE, SEND_DUMMYPOST_REQUEST, UPLOAD_IMAGES_REQUEST } from \"../reducers/post\";\nimport Router from \"next/router\";\nimport useInput from \"../hooks/useInput\";\nimport Layout from \"../components/Layout\";\nvar TextArea = Input.TextArea;\nvar Option = Select.Option;\n\nfunction Write() {\n  _s();\n\n  var _this = this;\n\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      me = _useSelector.me;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.post;\n  }),\n      object_TagsData = _useSelector2.object_TagsData,\n      talent_TagsData = _useSelector2.talent_TagsData,\n      cooperate_tagsData = _useSelector2.cooperate_tagsData,\n      play_tagsData = _useSelector2.play_tagsData,\n      imagePaths = _useSelector2.imagePaths,\n      addPostDone = _useSelector2.addPostDone;\n\n  var _useInput = useInput(''),\n      _useInput2 = _slicedToArray(_useInput, 3),\n      title = _useInput2[0],\n      onTitle = _useInput2[1],\n      setTitle = _useInput2[2];\n\n  var _useInput3 = useInput(''),\n      _useInput4 = _slicedToArray(_useInput3, 3),\n      content = _useInput4[0],\n      onContent = _useInput4[1],\n      setContent = _useInput4[2];\n\n  var _useInput5 = useInput(0),\n      _useInput6 = _slicedToArray(_useInput5, 3),\n      price = _useInput6[0],\n      onPrice = _useInput6[1],\n      setPrice = _useInput6[2];\n\n  var _useInput7 = useInput(0),\n      _useInput8 = _slicedToArray(_useInput7, 3),\n      originalPrice = _useInput8[0],\n      onOriginalPrice = _useInput8[1],\n      setOriginalPrice = _useInput8[2];\n\n  var _useInput9 = useInput(0),\n      _useInput10 = _slicedToArray(_useInput9, 3),\n      sharedPrice = _useInput10[0],\n      onSharedPrice = _useInput10[1],\n      setSharedPrice = _useInput10[2];\n\n  var provinceData = ['물건빌려줘', '물건빌려줄게', '힘을빌려줘', '힘을빌려줄게', '같이하자', '동네놀이터'];\n  var tags1 = object_TagsData.filter(function (e, i) {\n    return i > 0;\n  }); // 전체 태그를 제외한 나머지 태그들을 불러옴\n\n  var tags2 = object_TagsData.filter(function (e, i) {\n    return i > 0;\n  }); // 전체 태그를 제외한 나머지 태그들을 불러옴\n\n  var tags3 = talent_TagsData.filter(function (e, i) {\n    return i > 0;\n  }); // 전체 태그를 제외한 나머지 태그들을 불러옴\n\n  var tags4 = talent_TagsData.filter(function (e, i) {\n    return i > 0;\n  }); // 전체 태그를 제외한 나머지 태그들을 불러옴\n\n  var tags5 = cooperate_tagsData.filter(function (e, i) {\n    return i > 0;\n  }); // 전체 태그를 제외한 나머지 태그들을 불러옴\n\n  var tags6 = play_tagsData.filter(function (e, i) {\n    return i > 0;\n  }); // 전체 태그를 제외한 나머지 태그들을 불러옴\n\n  var imageInput = useRef();\n  useEffect(function () {\n    if (!(me && me.id)) {\n      Router.push('/');\n    }\n  }, [me && me.id]);\n  useEffect(function () {\n    if (addPostDone) {\n      Router.push('/');\n    }\n  }, [addPostDone]);\n  useEffect(function () {\n    setPrice(null);\n    setOriginalPrice(null);\n    setSharedPrice(null);\n  }, []);\n\n  if (!me) {\n    return '내 정보 로딩중...';\n  }\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _useState = useState(provinceData[0]),\n      board = _useState[0],\n      setBoard = _useState[1];\n\n  var onBoard = useCallback(function (value) {\n    setBoard(value);\n  }, []);\n\n  var _useState2 = useState(tags1[0]),\n      category = _useState2[0],\n      setCategory = _useState2[1];\n\n  var onCategory = useCallback(function (value) {\n    setCategory(value);\n  }, []);\n  var onClickImageUpload = useCallback(function () {\n    imageInput.current.click();\n  }, [imageInput.current]);\n  var onChangeImages = useCallback(function (e) {\n    console.log('images', e.target.files);\n    var imageFormData = new FormData();\n    [].forEach.call(e.target.files, function (f) {\n      imageFormData.append('image', f);\n    });\n    dispatch({\n      type: UPLOAD_IMAGES_REQUEST,\n      data: imageFormData\n    });\n  });\n  var onRemoveImage = useCallback(function (index) {\n    return function () {\n      dispatch({\n        type: REMOVE_IMAGE,\n        data: index\n      });\n    };\n  });\n  var onSubmit = useCallback(function () {\n    if (!content || !content.trim()) {\n      return alert('게시글을 작성하세요.');\n    }\n\n    if (!price) setPrice(0);\n    if (!originalPrice) setOriginalPrice(0);\n    if (!sharedPrice) setSharedPrice(0);\n    var formData = new FormData();\n    imagePaths.forEach(function (i) {\n      formData.append('image', i);\n    });\n    formData.append('content', content);\n    formData.append('userid', me.id);\n    formData.append('location', me.location);\n    formData.append('nickname', me.nickname);\n    formData.append('category', category);\n    formData.append('title', title);\n    formData.append('originalPrice', originalPrice);\n    formData.append('sharedPrice', sharedPrice);\n    formData.append('price', price);\n    if (board == provinceData[0]) formData.append('boardNum', 1);else if (board == provinceData[1]) formData.append('boardNum', 2);else if (board == provinceData[2]) formData.append('boardNum', 3);else if (board == provinceData[3]) formData.append('boardNum', 4);else if (board == provinceData[4]) formData.append('boardNum', 5);else if (board == provinceData[5]) formData.append('boardNum', 6);\n    return dispatch({\n      type: SEND_DUMMYPOST_REQUEST,\n      data: formData\n    });\n  }, [content, imagePaths]);\n  var onCancel = useCallback(function () {\n    Router.push('/');\n  }, []);\n  return __jsx(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 12\n    }\n  })), __jsx(Form, {\n    layout: \"horizontal\",\n    form: form,\n    initialValues: {\n      layout: 'horizontal'\n    },\n    onFinish: onSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, __jsx(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, __jsx(Input.Group, {\n    compact: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, __jsx(Input, {\n    style: {\n      width: '69%'\n    },\n    placeholder: \"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: title,\n    onChange: onTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }), ' ', board === provinceData[0] && __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uB80C\\uD0C8\\uBE44\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: price,\n    onChange: onPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }), board === provinceData[1] && __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uB80C\\uD0C8\\uBE44\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: price,\n    onChange: onPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }), board === provinceData[2] && __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uB80C\\uD0C8\\uBE44\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: price,\n    onChange: onPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }), board === provinceData[3] && __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uB80C\\uD0C8\\uBE44\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: price,\n    onChange: onPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }), board === provinceData[4] && category == tags5[0] && __jsx(Input.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uBB3C\\uD488\\uAE08\\uC561\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: originalPrice,\n    onChange: onOriginalPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 15\n    }\n  }), __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uAC1C\\uC778\\uBD80\\uB2F4\\uC561\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: sharedPrice,\n    onChange: onSharedPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  })), board === provinceData[4] && category == tags5[1] && __jsx(Input.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }, __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uBC30\\uB2EC\\uBE44\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: originalPrice,\n    onChange: onOriginalPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 15\n    }\n  }), __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uAC1C\\uC778\\uBD80\\uB2F4\\uC561\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: sharedPrice,\n    onChange: onSharedPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 15\n    }\n  })), board === provinceData[4] && category == tags5[2] && __jsx(Input.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }, __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uC815\\uC0C1\\uAC00\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: originalPrice,\n    onChange: onOriginalPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 15\n    }\n  }), __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uACF5\\uAD6C\\uAC00\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: sharedPrice,\n    onChange: onSharedPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 15\n    }\n  })), board === provinceData[4] && category == tags5[3] && __jsx(Input, {\n    style: {\n      width: '30%'\n    },\n    placeholder: \"\\uB80C\\uD0C8\\uBE44\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n    value: originalPrice,\n    onChange: onOriginalPrice,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }))), __jsx(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 9\n    }\n  }, __jsx(Select, {\n    defaultValue: provinceData,\n    style: {\n      width: 120\n    },\n    onChange: onBoard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 11\n    }\n  }, provinceData.map(function (province) {\n    return __jsx(Option, {\n      key: province,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 15\n      }\n    }, province);\n  })), board === provinceData[0] && __jsx(Select, {\n    style: {\n      width: 120\n    },\n    defaultValue: tags1[0],\n    onChange: onCategory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 11\n    }\n  }, tags1.map(function (tag) {\n    return __jsx(Option, {\n      value: tag,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 15\n      }\n    }, tag);\n  })), board === provinceData[1] && __jsx(Select, {\n    style: {\n      width: 120\n    },\n    defaultValue: tags2[0],\n    onChange: onCategory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 11\n    }\n  }, tags2.map(function (city) {\n    return __jsx(Option, {\n      value: city,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 15\n      }\n    }, city);\n  })), board === provinceData[2] && __jsx(Select, {\n    style: {\n      width: 120\n    },\n    defaultValue: tags3[0],\n    onChange: onCategory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 11\n    }\n  }, tags3.map(function (city) {\n    return __jsx(Option, {\n      value: city,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 15\n      }\n    }, city);\n  })), board === provinceData[3] && __jsx(Select, {\n    style: {\n      width: 120\n    },\n    defaultValue: tags4[0],\n    onChange: onCategory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 11\n    }\n  }, tags4.map(function (city) {\n    return __jsx(Option, {\n      value: city,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 15\n      }\n    }, city);\n  })), board === provinceData[4] && __jsx(Select, {\n    style: {\n      width: 120\n    },\n    defaultValue: null,\n    onChange: onCategory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 11\n    }\n  }, tags5.map(function (city) {\n    return __jsx(Option, {\n      value: city,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 15\n      }\n    }, city);\n  })), board === provinceData[5] && __jsx(Select, {\n    style: {\n      width: 120\n    },\n    defaultValue: tags6[0],\n    onChange: onCategory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 11\n    }\n  }, tags6.map(function (city) {\n    return __jsx(Option, {\n      value: city,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 15\n      }\n    }, city);\n  }))), __jsx(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 11\n    }\n  }, __jsx(\"input\", {\n    type: \"file\",\n    name: \"image\",\n    multiple: true,\n    hidden: true,\n    ref: imageInput,\n    onChange: onChangeImages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 13\n    }\n  }), __jsx(Button, {\n    onClick: onClickImageUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 13\n    }\n  }, \"\\uC774\\uBBF8\\uC9C0 \\uC5C5\\uB85C\\uB4DC\")), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 11\n    }\n  }, imagePaths.map(function (v, i) {\n    return __jsx(\"div\", {\n      key: v,\n      style: {\n        display: 'inline-block'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 15\n      }\n    }, __jsx(\"img\", {\n      src: \"http://localhost:3065/\".concat(v),\n      style: {\n        width: '200px'\n      },\n      alt: v,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 17\n      }\n    }), __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 17\n      }\n    }, __jsx(Button, {\n      onClick: onRemoveImage(i),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 19\n      }\n    }, \"\\uC81C\\uAC70\")));\n  }))), __jsx(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 9\n    }\n  }, __jsx(TextArea, {\n    placeholder: \"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",\n    autoSize: {\n      minRows: 7,\n      maxRows: 7\n    },\n    value: content,\n    onChange: onContent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 11\n    }\n  })), __jsx(Form.Item, {\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 9\n    }\n  }, __jsx(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 11\n    }\n  }, \"\\uB4F1\\uB85D\"), ' ', __jsx(Button, {\n    type: \"primary\",\n    onClick: onCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 11\n    }\n  }, \"\\uCDE8\\uC18C\"))));\n}\n\n_s(Write, \"9GgdHRjWcaACzk+7MmzuWB8E3JA=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useInput, useInput, useInput, useInput, useInput, Form.useForm];\n});\n\n_c = Write;\n;\nexport default Write;\n\nvar _c;\n\n$RefreshReg$(_c, \"Write\");","map":{"version":3,"sources":["C:/Bootcamp/teamproject/project/LocalRentalKing/front/pages/write.js"],"names":["React","useCallback","useEffect","useRef","useState","useDispatch","useSelector","AppLayout","Button","Form","Input","Select","REMOVE_IMAGE","SEND_DUMMYPOST_REQUEST","UPLOAD_IMAGES_REQUEST","Router","useInput","Layout","TextArea","Option","Write","dispatch","state","user","me","post","object_TagsData","talent_TagsData","cooperate_tagsData","play_tagsData","imagePaths","addPostDone","title","onTitle","setTitle","content","onContent","setContent","price","onPrice","setPrice","originalPrice","onOriginalPrice","setOriginalPrice","sharedPrice","onSharedPrice","setSharedPrice","provinceData","tags1","filter","e","i","tags2","tags3","tags4","tags5","tags6","imageInput","id","push","useForm","form","board","setBoard","onBoard","value","category","setCategory","onCategory","onClickImageUpload","current","click","onChangeImages","console","log","target","files","imageFormData","FormData","forEach","call","f","append","type","data","onRemoveImage","index","onSubmit","trim","alert","formData","location","nickname","onCancel","layout","width","map","province","tag","city","v","display","minRows","maxRows","textAlign"],"mappings":"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","sourcesContent":["import React, {useCallback, useEffect, useRef, useState} from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport AppLayout from '../components/AppLayout/AppLayout';\r\nimport {Button, Form, Input, Select} from \"antd\";\r\nimport 'antd/dist/antd.css';\r\nimport {REMOVE_IMAGE, SEND_DUMMYPOST_REQUEST, UPLOAD_IMAGES_REQUEST} from \"../reducers/post\";\r\nimport Router from \"next/router\";\r\nimport useInput from \"../hooks/useInput\";\r\nimport Layout from \"../components/Layout\";\r\n\r\nconst {TextArea} = Input;\r\nconst {Option} = Select;\r\n\r\nfunction Write() {\r\n  const dispatch = useDispatch();\r\n  const {me} = useSelector((state) => state.user);\r\n  const {object_TagsData , talent_TagsData , cooperate_tagsData , play_tagsData , imagePaths, addPostDone} = useSelector((state) => state.post);\r\n  const [title, onTitle, setTitle] = useInput('');\r\n  const [content, onContent, setContent] = useInput('');\r\n  const [price, onPrice, setPrice] = useInput(0);\r\n  const [originalPrice, onOriginalPrice, setOriginalPrice] = useInput(0);\r\n  const [sharedPrice, onSharedPrice, setSharedPrice] = useInput(0);\r\n\r\n  const provinceData = ['물건빌려줘', '물건빌려줄게', '힘을빌려줘', '힘을빌려줄게', '같이하자', '동네놀이터',];\r\n  const tags1 = object_TagsData.filter((e,i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\r\n  const tags2 = object_TagsData.filter((e,i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\r\n  const tags3 = talent_TagsData.filter((e,i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\r\n  const tags4 = talent_TagsData.filter((e,i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\r\n  const tags5 = cooperate_tagsData.filter((e,i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\r\n  const tags6 = play_tagsData.filter((e,i) => i > 0); // 전체 태그를 제외한 나머지 태그들을 불러옴\r\n  const imageInput = useRef();\r\n\r\n  useEffect(() => {\r\n    if (!(me && me.id)) {\r\n      Router.push('/');\r\n    }\r\n  }, [me && me.id]);\r\n\r\n  useEffect(() => {\r\n    if (addPostDone) {\r\n      Router.push('/');\r\n    }\r\n  }, [addPostDone]);\r\n\r\n  useEffect(() => {\r\n    setPrice(null);\r\n    setOriginalPrice(null);\r\n    setSharedPrice(null);\r\n  }, []);\r\n\r\n  if (!me) {\r\n    return '내 정보 로딩중...';\r\n  }\r\n\r\n\r\n    const [form] = Form.useForm();\r\n\r\n    const [board, setBoard] = useState(provinceData[0]);\r\n    const onBoard = useCallback((value) => {\r\n      setBoard(value);\r\n    }, []);\r\n\r\n    const [category, setCategory] = useState(tags1[0]);\r\n    const onCategory = useCallback((value) => {\r\n      setCategory(value);\r\n    }, []);\r\n\r\n  const onClickImageUpload = useCallback(() => {\r\n    imageInput.current.click();\r\n  }, [imageInput.current]);\r\n\r\n  const onChangeImages = useCallback((e) => {\r\n    console.log('images', e.target.files);\r\n    const imageFormData = new FormData();\r\n    [].forEach.call(e.target.files, (f) => {\r\n      imageFormData.append('image', f);\r\n    });\r\n    dispatch({\r\n      type: UPLOAD_IMAGES_REQUEST,\r\n      data: imageFormData,\r\n    });\r\n  });\r\n\r\n  const onRemoveImage = useCallback((index) => () => {\r\n    dispatch({\r\n      type: REMOVE_IMAGE,\r\n      data: index,\r\n    });\r\n  });\r\n\r\n  const onSubmit = useCallback(() => {\r\n    if (!content || !content.trim()) {\r\n      return alert('게시글을 작성하세요.');\r\n    }\r\n\r\n    if(!price)setPrice(0);\r\n    if(!originalPrice)setOriginalPrice(0);\r\n    if(!sharedPrice)setSharedPrice(0);\r\n\r\n    const formData = new FormData();\r\n    imagePaths.forEach((i) => {\r\n      formData.append('image', i);\r\n    });\r\n    formData.append('content', content);\r\n    formData.append('userid', me.id);\r\n    formData.append('location', me.location);\r\n    formData.append('nickname', me.nickname);\r\n    formData.append('category', category);\r\n    formData.append('title', title);\r\n    formData.append('originalPrice', originalPrice);\r\n    formData.append('sharedPrice', sharedPrice);\r\n    formData.append('price', price);\r\n\r\n    if(board == provinceData[0])formData.append('boardNum', 1);\r\n    else if(board == provinceData[1])formData.append('boardNum', 2);\r\n    else if(board == provinceData[2])formData.append('boardNum', 3);\r\n    else if(board == provinceData[3])formData.append('boardNum', 4);\r\n    else if(board == provinceData[4])formData.append('boardNum', 5);\r\n    else if(board == provinceData[5])formData.append('boardNum', 6);\r\n\r\n    return dispatch({\r\n      type: SEND_DUMMYPOST_REQUEST,\r\n      data: formData,\r\n    });\r\n  }, [content, imagePaths]);\r\n\r\n  const onCancel = useCallback(() => {\r\n    Router.push('/');\r\n  }, []);\r\n\r\n  return (\r\n    <Layout>\r\n      <div><br/></div>\r\n      <Form\r\n        layout=\"horizontal\"\r\n        form={form}\r\n        initialValues={{\r\n          layout: 'horizontal',\r\n        }}\r\n        onFinish={onSubmit}\r\n      >\r\n\r\n        <Form.Item>\r\n          <Input.Group compact >\r\n            <Input style={{width: '69%'}} placeholder=\"제목을 입력해주세요.\" value={title} onChange={onTitle}/>{' '}\r\n            {board === provinceData[0] &&\r\n            <Input style={{width: '30%'}} placeholder=\"렌탈비를 입력해주세요.\" value={price} onChange={onPrice}/>}\r\n            {board === provinceData[1] &&\r\n            <Input style={{width: '30%'}} placeholder=\"렌탈비를 입력해주세요.\" value={price} onChange={onPrice}/>}\r\n            {board === provinceData[2] &&\r\n            <Input style={{width: '30%'}} placeholder=\"렌탈비를 입력해주세요.\" value={price} onChange={onPrice}/>}\r\n            {board === provinceData[3] &&\r\n            <Input style={{width: '30%'}} placeholder=\"렌탈비를 입력해주세요.\" value={price} onChange={onPrice}/>}\r\n\r\n            {board === provinceData[4] && category == tags5[0] &&\r\n            <Input.Group>\r\n              <Input\r\n                style={{width: '30%'}}\r\n                placeholder=\"물품금액을 입력해주세요.\"\r\n                value={originalPrice} onChange={onOriginalPrice}\r\n              />\r\n              <Input\r\n              style={{width: '30%'}}\r\n              placeholder=\"개인부담액을 입력해주세요.\"\r\n              value={sharedPrice} onChange={onSharedPrice}\r\n              />\r\n            </Input.Group>\r\n            }\r\n\r\n            {board === provinceData[4] && category == tags5[1] &&\r\n            <Input.Group>\r\n              <Input\r\n                style={{width: '30%'}}\r\n                placeholder=\"배달비를 입력해주세요.\"\r\n                value={originalPrice} onChange={onOriginalPrice}\r\n              />\r\n              <Input\r\n                style={{width: '30%'}}\r\n                placeholder=\"개인부담액을 입력해주세요.\"\r\n                value={sharedPrice} onChange={onSharedPrice}\r\n              />\r\n            </Input.Group>\r\n            }\r\n\r\n            {board === provinceData[4] && category == tags5[2] &&\r\n            <Input.Group>\r\n              <Input\r\n                style={{width: '30%'}}\r\n                placeholder=\"정상가를 입력해주세요.\"\r\n                value={originalPrice} onChange={onOriginalPrice}\r\n              />\r\n              <Input\r\n                style={{width: '30%'}}\r\n                placeholder=\"공구가를 입력해주세요.\"\r\n                value={sharedPrice} onChange={onSharedPrice}\r\n              />\r\n            </Input.Group>\r\n            }\r\n\r\n\r\n            {board === provinceData[4] && category == tags5[3] &&\r\n            <Input\r\n              style={{width: '30%'}}\r\n              placeholder=\"렌탈비를 입력해주세요.\"\r\n              value={originalPrice} onChange={onOriginalPrice}\r\n            />\r\n            }\r\n\r\n          </Input.Group>\r\n        </Form.Item>\r\n\r\n        <Form.Item>\r\n          <Select\r\n            defaultValue={provinceData}\r\n            style={{width: 120}}\r\n            onChange={onBoard}\r\n          >\r\n            {provinceData.map((province) => (\r\n              <Option key={province}>{province}</Option>\r\n            ))}\r\n          </Select>\r\n          {board === provinceData[0] &&\r\n          <Select\r\n            style={{width: 120}}\r\n            defaultValue={tags1[0]}\r\n            onChange={onCategory}\r\n          >\r\n            {tags1.map((tag) => (\r\n              <Option value={tag}>{tag}</Option>\r\n            ))}\r\n          </Select>\r\n          }\r\n          {board === provinceData[1] &&\r\n          <Select\r\n            style={{width: 120}}\r\n            defaultValue={tags2[0]}\r\n            onChange={onCategory}\r\n          >\r\n            {tags2.map((city) => (\r\n              <Option value={city}>{city}</Option>\r\n            ))}\r\n          </Select>\r\n          }\r\n          {board === provinceData[2] &&\r\n          <Select\r\n            style={{width: 120}}\r\n            defaultValue={tags3[0]}\r\n            onChange={onCategory}\r\n          >\r\n\r\n            {tags3.map((city) => (\r\n              <Option value={city}>{city}</Option>\r\n            ))}\r\n          </Select>\r\n          }\r\n          {board === provinceData[3] &&\r\n          <Select\r\n            style={{width: 120}}\r\n            defaultValue={tags4[0]}\r\n            onChange={onCategory}\r\n          >\r\n\r\n            {tags4.map((city) => (\r\n              <Option value={city}>{city}</Option>\r\n            ))}\r\n          </Select>\r\n          }\r\n          {board === provinceData[4] &&\r\n          <Select\r\n            style={{width: 120}}\r\n            defaultValue={null}\r\n            onChange={onCategory}\r\n          >\r\n\r\n            {tags5.map((city) => (\r\n              <Option value={city}>{city}</Option>\r\n            ))}\r\n          </Select>\r\n          }\r\n          {board === provinceData[5] &&\r\n          <Select\r\n            style={{width: 120}}\r\n            defaultValue={tags6[0]}\r\n            onChange={onCategory}\r\n          >\r\n            {tags6.map((city) => (\r\n              <Option value={city}>{city}</Option>\r\n            ))}\r\n          </Select>\r\n          }\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <div>\r\n            <input type=\"file\" name=\"image\" multiple hidden ref={imageInput} onChange={onChangeImages} />\r\n            <Button onClick={onClickImageUpload}>이미지 업로드</Button>\r\n          </div>\r\n          <div>\r\n            {imagePaths.map((v, i) => (\r\n              <div key={v} style={{ display: 'inline-block' }}>\r\n                <img src={`http://localhost:3065/${v}`} style={{ width: '200px' }} alt={v} />\r\n                {/* 프론트와 백의 도메인이 다르기 때문에 도메인 교정을 해주어야 백의 이미지를 성공적으로 들고와 렌더링 할 수 있다. */}\r\n                <div>\r\n                  <Button onClick={onRemoveImage(i)}>제거</Button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <TextArea\r\n            placeholder=\"내용을 입력해주세요\"\r\n            autoSize={{minRows: 7, maxRows: 7}}\r\n            value={content}\r\n            onChange={onContent}\r\n          />\r\n        </Form.Item>\r\n\r\n        <Form.Item style={{textAlign: 'center'}}>\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            등록\r\n          </Button>{' '}\r\n          <Button type=\"primary\" onClick={onCancel}>취소</Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Write;\r\n"]},"metadata":{},"sourceType":"module"}